<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Silent Movie</title>

  <!-- Cinzel -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
<div id="app">

  <!-- ä¸Šé®ç½© -->
  <div class="mask" id="mask-top"></div>

  <!-- æ”¾æ˜ åŒºåŸŸ -->
  <div id="stage">

    <!-- å†…å®¹ï¼ˆæœ€åº•å±‚ï¼‰ -->
    <div id="content">
      <div class="film-title">Silent Movie</div>

      åœ¨è¿™é‡Œï¼Œä¸ºäº†ä½“ç°ç«–çº¿åŠ¨ç”»çš„éšæœºæ€§ï¼Œæˆ‘ä»¬ç»™ :before å’Œ :after ä¼ªç±»åˆ†åˆ«è®¾ç½®äº†å„è‡ªçš„åŠ¨ç”»æ­¥éª¤ï¼Œåœ¨ä¸åŒçš„æ—¶æœºç‚¹ï¼Œç«–çº¿ä½ç½®åœ¨æ°´å¹³æ–¹å‘ä¸Šä¼šè¿›è¡Œå¹³ç§»ã€‚
      æ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­ç»™å™ªç‚¹ä¹Ÿæ·»åŠ ä¸ŠåŠ¨ç”»ï¼ŒåŒæ ·ä¹Ÿæ˜¯é€šè¿‡ keyframes å¸§åŠ¨ç”»æ¥å®ç°ã€‚

      <div class="film-end">end</div>
    </div>

    <!-- ç‰¹æ•ˆå±‚ï¼ˆå…¨å±ï¼‰ -->
    <div class="effects">
      <div class="film"></div>
      <div class="noise"></div>
    </div>

  </div>

  <!-- ä¸‹é®ç½© -->
  <div class="mask" id="mask-bottom"></div>
</div>

<!-- æ¨ªå±æç¤º -->
<div id="orientation-hint">è¯·ç«–å±è§‚çœ‹</div>

<!-- åˆ‡æ¢æŒ‰é’® -->
<button id="toggle">ğŸ“½</button>

<script>
/* ========= æ¨¡å¼ ========= */
let mode = localStorage.getItem('mode') || 'film';
const title = document.querySelector('.film-title');

/* ========= å­—ä½“çº¿æ€§æ˜ å°„ =========
   360px â†’ 16px
   800px â†’ 36px
*/
function updateFontSize() {
  const w = window.innerWidth;
  const size = 16 + (w - 360) * (20 / 440);
  document.documentElement.style.setProperty('--base-font', Math.round(size) + 'px');
}

/* ========= é®ç½©ï¼ˆ3:4ï¼‰========= */
function updateMask() {
  if (mode === 'book') return;

  const W = window.innerWidth;
  const H = window.innerHeight;
  const visibleH = W * 3 / 4;
  const maskH = Math.max(0, (H - visibleH) / 2);

  maskTop.style.height = maskH + 'px';
  maskBottom.style.height = maskH + 'px';
  stage.style.height = visibleH + 'px';
}

/* ========= åº”ç”¨æ¨¡å¼ ========= */
function applyMode() {
  document.body.className = mode === 'book' ? 'book' : '';

  if (mode === 'book') {
    title.classList.remove('develop');
  } else {
    title.classList.add('develop');
  }

  updateMask();
}

/* ========= æ–¹å‘æ£€æµ‹ ========= */
function checkOrientation() {
  const hint = document.getElementById('orientation-hint');
  if (innerWidth > innerHeight) {
    hint.classList.add('active');
  } else {
    hint.classList.remove('active');
  }
}

/* ========= äº‹ä»¶ ========= */
toggle.onclick = () => {
  mode = mode === 'film' ? 'book' : 'film';
  localStorage.setItem('mode', mode);
  applyMode();
};

window.addEventListener('resize', () => {
  updateFontSize();
  updateMask();
  checkOrientation();
});

/* ========= åˆå§‹åŒ– ========= */
applyMode();
updateFontSize();
checkOrientation();
</script>
</body>
</html>
